<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<!--
    ABOUT THIS PROJECT:

    
-->
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:fn="http://java.sun.com/jsp/jstl/functions"
      xmlns:c="http://java.sun.com/jsp/jstl/core"
      xmlns:cc="http://java.sun.com/jsf/composite"
      xmlns:sec="http://www.springframework.org/security/facelets/tags"
      xmlns:p="http://primefaces.org/ui"      
      >
    <h:head>
        <meta content="text/html; charset=UTF-8" http-equiv="Content-Type"/>
        <meta name="Keywords" content="JSF WCTC JAVA"/>
        <meta name="Description" content="A basic JSF v2 home page without a template"/>
        <meta name="Robots" content="index,follow"/>

        <title>Home</title>

        <h:outputStylesheet name="default.css" library="css" />
        <h:outputStylesheet name="cssLayout.css" library="css" />
        <link rel="SHORTCUT ICON" href="/purpleproject/favicon.ico"/>
    </h:head>
    <h:body>
        <h2>EJB Stateless Session Bean Demo</h2>
        <p>This demo shows a typical, end-to-end data flow from
            <b>View - JSF Managed Bean - EJB - DB</b> using JPA. The demo shows this 
            using both a JPA Projection Query (here) and a JPA Entity Object
            Query (next page). A third page demonstrates a JPA Entity query
            where the entity objects retrieved are detached from the JPA
            PersistenceContext, but have lazy-loaded joined entities that
            cannot be retrieved in the View (exception is thrown). Switching
            the employee collection property in the Department class to use
            EAGER loading is an option to solve this problem.
        </p>
        <p>For a demo of EJB Stateful Session Bean use, 
            <a href="faces/index4.xhtml">click here</a></p>
        <h:form id="form1">
            <h:dataTable id="empTable" rows="10" value="#{employeeSrv.namesHireDate}"
                         var="emp" rowClasses="list-row-odd, list-row-even" width="500">
                <f:facet name="header">
                    Employee List From JPA Projection Query
                </f:facet>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="ID" />
                    </f:facet>
                    <h:outputText value="#{emp[0]}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Last Name" />
                    </f:facet>
                    <h:outputText value="#{emp[1]}" />
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="First Name" />
                    </f:facet>
                    <h:outputText value="#{emp[2]}"/>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Hire Date" style="float:right;" />
                    </f:facet>
                    <h:outputText value="#{emp[3]}" style="float:right;">
                        <f:convertDateTime pattern="MM-dd-yy" />
                    </h:outputText>
                </h:column>
                <h:column>
                    <f:facet name="header">
                        <h:outputText value="Action" style="float:right;" />
                    </f:facet>
                    <h:commandButton id="cmdDelete" style="float:right;" value="Delete" action="#{employeeSrv.removeWithAudit(emp[0])}"/>
                </h:column>
            </h:dataTable>
            <h:commandButton id="cmdNextPage" value="Next Page" action="index2"/>
        </h:form>
    </h:body>

</html>
